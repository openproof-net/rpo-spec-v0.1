<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>OPENPROOF .NET — RPO v0.1 | Simulator</title>

  <!-- Optional fonts (remove if your site already injects fonts) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg0:#04040E;
      --bg1:#0b0f14;
      --panel:rgba(18,18,26,.58);
      --panel2:rgba(12,12,18,.62);
      --line:rgba(212,175,55,.26);
      --line2:rgba(212,175,55,.18);
      --gold0:#f1e6a3;
      --gold1:#d4af37;
      --gold2:#8f7633;
      --text:#e9e7df;
      --muted:rgba(233,231,223,.70);
      --dim:rgba(233,231,223,.52);
      --shadow: 0 18px 60px rgba(0,0,0,.55);
      --r:22px;
      --r2:16px;
      --pad:22px;
      --chipH:30px;
      --navH:68px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      color:var(--text);
      background:
        radial-gradient(1000px 520px at 50% -120px, rgba(212,175,55,.16), transparent 55%),
        radial-gradient(800px 520px at 82% 18%, rgba(241,230,163,.10), transparent 62%),
        radial-gradient(900px 540px at 20% 35%, rgba(212,175,55,.10), transparent 62%),
        linear-gradient(180deg, var(--bg0), var(--bg1) 45%, var(--bg0));
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      letter-spacing: .1px;
    }

    a{color:inherit; text-decoration:none}
    .wrap{
      width:min(1680px, calc(100vw - 64px));
      margin:0 auto;
    }

    /* ---------- NAV ---------- */
    .nav{
      position:sticky;
      top:0;
      z-index:30;
      height:var(--navH);
      backdrop-filter: blur(14px);
      background: linear-gradient(180deg, rgba(4,4,14,.78), rgba(4,4,14,.40));
      border-bottom:1px solid rgba(212,175,55,.12);
    }
    .nav .inner{
      height:100%;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:18px;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:12px;
      min-width:240px;
    }
    .dot{
      width:10px;height:10px;border-radius:50%;
      background: radial-gradient(circle at 30% 30%, var(--gold0), var(--gold1) 55%, var(--gold2));
      box-shadow:0 0 24px rgba(212,175,55,.35);
    }
    .brand .t1{
      font-family: Orbitron, Inter, sans-serif;
      font-weight:700;
      font-size:13px;
      letter-spacing:.9px;
      text-transform:uppercase;
      opacity:.98;
      line-height:1.1;
    }
    .brand .t2{
      font-size:12px;
      color:var(--dim);
      margin-top:2px;
    }

    .menu{
      display:flex;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
      justify-content:center;
    }
    .menu a{
      font-size:13px;
      color:var(--muted);
      padding:8px 10px;
      border-radius:999px;
      border:1px solid transparent;
      transition:.15s ease;
    }
    .menu a:hover{
      color:var(--text);
      border-color:rgba(212,175,55,.16);
      background:rgba(18,18,26,.35);
    }
    .menu a.active{
      color:var(--text);
      border-color:rgba(212,175,55,.22);
      background:rgba(18,18,26,.45);
      box-shadow: 0 0 0 1px rgba(212,175,55,.08) inset;
    }

    .nav-cta{
      display:flex;
      align-items:center;
      gap:10px;
      min-width:240px;
      justify-content:flex-end;
    }

    .btn{
      border:1px solid rgba(212,175,55,.22);
      background:rgba(18,18,26,.40);
      color:var(--text);
      border-radius:999px;
      padding:10px 14px;
      font-size:12px;
      letter-spacing:.5px;
      text-transform:uppercase;
      transition:.15s ease;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      cursor:pointer;
      user-select:none;
      white-space:nowrap;
    }
    .btn:hover{border-color:rgba(212,175,55,.32); background:rgba(18,18,26,.52)}
    .btn.primary{
      background: linear-gradient(180deg, rgba(241,230,163,.95), rgba(212,175,55,.92));
      border-color: rgba(241,230,163,.65);
      color:#1b160a;
      box-shadow: 0 12px 30px rgba(212,175,55,.16);
      font-weight:700;
    }
    .btn.primary:hover{filter:brightness(1.03)}
    .btn.ghost{
      background:transparent;
      border-color:rgba(212,175,55,.18);
      color:var(--muted);
    }

    /* ---------- PANELS ---------- */
    .panel{
      background: linear-gradient(180deg, rgba(18,18,26,.62), rgba(12,12,18,.58));
      border:1px solid rgba(212,175,55,.18);
      border-radius:var(--r);
      box-shadow: var(--shadow);
      position:relative;
      overflow:hidden;
    }
    .panel::before{
      content:"";
      position:absolute; inset:0;
      background:
        radial-gradient(900px 380px at 20% 10%, rgba(241,230,163,.12), transparent 55%),
        radial-gradient(800px 360px at 80% 20%, rgba(212,175,55,.08), transparent 58%);
      pointer-events:none;
      opacity:.7;
    }
    .panel > *{position:relative}

    .subpanel{
      background: linear-gradient(180deg, rgba(10,10,18,.72), rgba(10,10,18,.56));
      border:1px solid rgba(212,175,55,.14);
      border-radius:var(--r2);
      box-shadow: 0 12px 40px rgba(0,0,0,.42);
    }

    .kicker{
      font-family: Orbitron, Inter, sans-serif;
      letter-spacing: 1.2px;
      text-transform: uppercase;
      font-size:11px;
      color:rgba(241,230,163,.68);
    }

    .h1{
      font-family: Orbitron, Inter, sans-serif;
      font-weight:800;
      letter-spacing:.6px;
      margin:8px 0 10px;
      font-size:44px;
      line-height:1.08;
    }
    .h1 .gold{
      background: linear-gradient(180deg, var(--gold0), var(--gold1));
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
    }
    .lead{
      margin:0;
      color:var(--muted);
      max-width:1050px;
      font-size:13.5px;
      line-height:1.55;
    }

    .chips{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      margin-top:14px;
      align-items:center;
    }
    .chip{
      height:var(--chipH);
      padding:0 10px;
      border-radius:999px;
      border:1px solid rgba(212,175,55,.18);
      background:rgba(6,6,12,.35);
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-size:12px;
      color:rgba(233,231,223,.78);
    }
    .chip b{color:rgba(241,230,163,.85); font-weight:600}
    .chip .led{
      width:7px;height:7px;border-radius:999px;
      background:rgba(241,230,163,.75);
      box-shadow:0 0 14px rgba(212,175,55,.22);
    }

    .grid{
      display:grid;
      grid-template-columns: 1fr 420px;
      gap:18px;
      align-items:start;
      margin-top:18px;
    }

    .section{
      padding:var(--pad);
    }
    .section-title{
      font-family: Orbitron, Inter, sans-serif;
      font-size:12px;
      letter-spacing:1.1px;
      text-transform:uppercase;
      color:rgba(241,230,163,.72);
      margin:0 0 14px;
    }

    /* ---------- FORM ---------- */
    .form{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:12px;
    }
    .field{
      display:flex;
      flex-direction:column;
      gap:8px;
    }
    .label{
      font-family: Orbitron, Inter, sans-serif;
      font-size:11px;
      letter-spacing:1px;
      text-transform:uppercase;
      color:rgba(233,231,223,.68);
    }
    input[type="text"], input[type="date"], select, textarea{
      width:100%;
      padding:12px 12px;
      border-radius:12px;
      border:1px solid rgba(212,175,55,.14);
      background: rgba(6,6,12,.42);
      color:rgba(233,231,223,.92);
      outline:none;
      font-size:13px;
      transition:.12s ease;
    }
    textarea{min-height:76px; resize:vertical; line-height:1.45}
    input:focus, select:focus, textarea:focus{
      border-color: rgba(241,230,163,.34);
      box-shadow: 0 0 0 4px rgba(212,175,55,.10);
    }

    .hint{
      margin-top:10px;
      color:rgba(233,231,223,.52);
      font-size:12px;
      line-height:1.45;
    }

    /* ---------- SYSTEMS ---------- */
    .systems{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:12px;
      margin-top:12px;
    }
    .sys{
      padding:14px 14px;
      border-radius:14px;
      border:1px solid rgba(212,175,55,.14);
      background: rgba(6,6,12,.34);
      display:flex;
      gap:10px;
      align-items:flex-start;
      transition:.12s ease;
    }
    .sys:hover{border-color:rgba(212,175,55,.22)}
    .sys input{margin-top:3px}
    .sys .name{
      font-weight:650;
      font-size:13px;
      color:rgba(241,230,163,.82);
      margin-bottom:6px;
    }
    .sys .desc{
      font-size:12px;
      color:rgba(233,231,223,.68);
      line-height:1.45;
    }

    /* ---------- OUTPUT ---------- */
    .rows{
      display:grid;
      grid-template-columns: 1fr;
      gap:10px;
    }
    .row{
      display:grid;
      grid-template-columns: 220px 1fr;
      gap:14px;
      align-items:center;
      padding:12px 14px;
      border:1px solid rgba(212,175,55,.12);
      border-radius:14px;
      background: rgba(6,6,12,.30);
    }
    .row .k{
      font-family: Orbitron, Inter, sans-serif;
      font-size:11px;
      letter-spacing:1.05px;
      text-transform:uppercase;
      color:rgba(233,231,223,.62);
    }
    .row .v{
      font-size:13px;
      color:rgba(233,231,223,.90);
      display:flex;
      justify-content:space-between;
      gap:10px;
      align-items:center;
    }
    .badge{
      font-family: Orbitron, Inter, sans-serif;
      font-size:11px;
      letter-spacing:1px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(212,175,55,.18);
      color:rgba(241,230,163,.85);
      background: rgba(212,175,55,.08);
      white-space:nowrap;
    }
    .mono{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      font-size:12px;
      color:rgba(233,231,223,.78);
      line-height:1.55;
    }
    .tabs{
      display:flex; gap:8px; flex-wrap:wrap; margin-top:12px;
    }
    .tab{
      border-radius:999px;
      border:1px solid rgba(212,175,55,.16);
      background:rgba(6,6,12,.28);
      color:rgba(233,231,223,.70);
      padding:8px 12px;
      font-size:12px;
      cursor:pointer;
      user-select:none;
      transition:.12s ease;
    }
    .tab.active{
      color:rgba(233,231,223,.92);
      border-color:rgba(241,230,163,.30);
      box-shadow:0 0 0 3px rgba(212,175,55,.10);
    }

    .codebox{
      margin-top:10px;
      padding:14px;
      border-radius:16px;
      border:1px solid rgba(212,175,55,.14);
      background: rgba(6,6,12,.34);
      overflow:auto;
      max-height:340px;
    }

    /* ---------- COCKPIT ---------- */
    .cockpit{
      position:sticky;
      top: calc(var(--navH) + 18px);
      padding:18px;
    }
    .cockpit .title{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
      margin-bottom:12px;
    }
    .cockpit .title h3{
      margin:0;
      font-family: Orbitron, Inter, sans-serif;
      font-size:12px;
      letter-spacing:1.2px;
      text-transform:uppercase;
      color:rgba(241,230,163,.78);
      line-height:1.2;
    }
    .cockpit .title .mini{
      font-size:11px;
      color:rgba(233,231,223,.62);
      margin-top:6px;
      line-height:1.35;
    }

    .cockpit .metric{
      margin-top:10px;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid rgba(212,175,55,.14);
      background: rgba(6,6,12,.30);
      display:grid;
      grid-template-columns: 1fr auto;
      align-items:center;
      gap:10px;
    }
    .cockpit .metric .k{
      font-family: Orbitron, Inter, sans-serif;
      font-size:11px;
      letter-spacing:1.05px;
      text-transform:uppercase;
      color:rgba(233,231,223,.60);
    }
    .cockpit .metric .v{
      font-family: Orbitron, Inter, sans-serif;
      font-size:12px;
      letter-spacing:.7px;
      color:rgba(241,230,163,.90);
      text-align:right;
      max-width:230px;
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
    }
    .cockpit .note{
      margin-top:12px;
      color:rgba(233,231,223,.58);
      font-size:12px;
      line-height:1.45;
    }

    /* ---------- HERO ---------- */
    .hero{
      margin-top:18px;
    }
    .hero .section{
      padding:28px;
    }
    .hero-top{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:18px;
    }
    .hero-actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:14px;
    }

    /* ---------- CTA FOOTER ---------- */
    .bottom-cta{
      margin:18px 0 28px;
      padding:18px 22px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
    }
    .bottom-cta h4{
      margin:0 0 6px;
      font-family: Orbitron, Inter, sans-serif;
      text-transform:uppercase;
      letter-spacing:1.2px;
      font-size:12px;
      color:rgba(241,230,163,.78);
    }
    .bottom-cta p{
      margin:0;
      color:rgba(233,231,223,.66);
      font-size:12.5px;
      line-height:1.45;
      max-width:980px;
    }
    .footer{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:14px;
      padding:14px 0 26px;
      color:rgba(233,231,223,.50);
      font-size:12px;
    }
    .footer a{color:rgba(233,231,223,.58)}
    .footer a:hover{color:rgba(241,230,163,.78)}

    /* ---------- RESPONSIVE ---------- */
    @media (max-width: 1180px){
      .grid{grid-template-columns:1fr}
      .cockpit{position:relative; top:auto}
      .wrap{width:min(1200px, calc(100vw - 36px))}
      .h1{font-size:38px}
    }
    @media (max-width: 720px){
      .wrap{width:calc(100vw - 24px)}
      .hero .section{padding:18px}
      .h1{font-size:32px}
      .form{grid-template-columns:1fr}
      .systems{grid-template-columns:1fr}
      .row{grid-template-columns:1fr}
      .brand{min-width:auto}
      .nav-cta{min-width:auto}
      .menu{display:none}
    }
  </style>
</head>

<body>
  <!-- NAV -->
  <header class="nav">
    <div class="wrap inner">
      <a class="brand" href="#" target="_blank" rel="noopener noreferrer">
        <span class="dot"></span>
        <div>
          <div class="t1">OPENPROOF .NET — RPO v0.1</div>
          <div class="t2">Probative engine & governance</div>
        </div>
      </a>

      <nav class="menu" aria-label="Primary">
        <a href="#" target="_blank" rel="noopener noreferrer">Home</a>
        <a class="active" href="#" target="_blank" rel="noopener noreferrer">Simulator</a>
        <a href="#" target="_blank" rel="noopener noreferrer">How it works</a>
        <a href="#" target="_blank" rel="noopener noreferrer">Spec</a>
        <a href="#" target="_blank" rel="noopener noreferrer">Tests</a>
        <a href="#" target="_blank" rel="noopener noreferrer">Examples</a>
        <a href="#" target="_blank" rel="noopener noreferrer">Contexts</a>
      </nav>

      <div class="nav-cta">
        <a class="btn primary" href="#" target="_blank" rel="noopener noreferrer">PILOT COCKPIT</a>
      </div>
    </div>
  </header>

  <main class="wrap">
    <!-- HERO -->
    <section class="panel hero">
      <div class="section">
        <div class="hero-top">
          <div>
            <div class="kicker">Deterministic simulator</div>
            <div class="h1">Simulator. <span class="gold">Three contexts.</span> No AI. No interpretation.</div>
            <p class="lead" id="contextLead">
              Institutional crisis context: escalation readiness, stakeholder mapping, uncertainty logging, and reconstruction under pressure.
              Focus on fast, defensible reaction.
            </p>

            <div class="chips" style="margin-top:16px">
              <span class="chip"><span class="led"></span><b>Context</b> <span id="chipContext">Institutional Crisis</span></span>
              <span class="chip"><b>Moment T</b> <span id="chipMoment">2026-02-18</span></span>
              <span class="chip"><b>Stakeholders</b> <span id="chipStakeholders">—</span></span>
              <span class="chip"><b>Uncertainty log</b> <span id="chipUnc">—</span></span>
              <span class="chip"><b>Lineage</b> <span id="chipLineage">—</span></span>
              <span class="chip"><b>Institutional exposure</b> <span id="chipExposure">—</span></span>
              <span class="chip"><b>Public hash</b> <span id="chipHash">—</span></span>
            </div>

            <div class="hero-actions">
              <button class="btn primary" id="btnGenerate">GENERATE BUNDLE</button>
              <button class="btn" id="btnLoad">LOAD EXAMPLE</button>
            </div>

            <p class="hint">
              RPO = sealed JSON core + human-readable preview + public hash. The hash proves integrity over time, not “truth”.
              Verification is public. Accountability remains human.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- GRID -->
    <section class="grid">
      <!-- LEFT COLUMN -->
      <div class="col-left">
        <!-- INPUT -->
        <section class="subpanel">
          <div class="section">
            <h2 class="section-title">INPUT — Crisis perimeter</h2>

            <div class="form">
              <div class="field">
                <div class="label">Context</div>
                <select id="contextSelect">
                  <option value="governance">Governance</option>
                  <option value="judicial">Judicial procedures</option>
                  <option value="crisis" selected>Institutional crisis</option>
                </select>
              </div>

              <div class="field">
                <div class="label">Decision type</div>
                <select id="decisionType">
                  <option>Institutional crisis decision</option>
                  <option>Workforce / HR decision</option>
                  <option>Compliance / training decision</option>
                </select>
              </div>

              <div class="field">
                <div class="label">Organization scope</div>
                <input id="scope" type="text" value="Industrial group — multi-sites, multi-entities (EU + non-EU)" />
              </div>

              <div class="field">
                <div class="label">Institutional authority</div>
                <input id="authority" type="text" value="Group HR Authority" />
              </div>

              <div class="field">
                <div class="label">Moment T</div>
                <input id="moment" type="date" value="2026-02-18" />
              </div>

              <div class="field" style="grid-column:1/-1">
                <div class="label">Decision context (constraints, audit window)</div>
                <textarea id="constraints">Crisis framing: signals, stakeholders, constraints.
Stabilize uncertainty + contradictions. Prepare escalation to Legal / IT / COMEX as needed.</textarea>
              </div>
            </div>

            <div class="hint">
              Keep it factual. The simulator does not “decide truth”. It evaluates reconstructibility risk at Moment T.
            </div>

            <div style="margin-top:18px">
              <div class="label">Declared systems (HR / L&amp;D / Ops / Security)</div>
              <div class="systems">
                <label class="sys">
                  <input type="checkbox" class="sysCheck" data-key="HRIS" checked />
                  <div>
                    <div class="name">HRIS / Core HCM</div>
                    <div class="desc">Master data, identity, contracts, org structure, job families. Extract id + steward expected.</div>
                  </div>
                </label>

                <label class="sys">
                  <input type="checkbox" class="sysCheck" data-key="LMS" checked />
                  <div>
                    <div class="name">LMS / TMS / LXP</div>
                    <div class="desc">Training records, mandatory compliance, completion evidence. Useful for audit & litigation exposure.</div>
                  </div>
                </label>

                <label class="sys">
                  <input type="checkbox" class="sysCheck" data-key="OPS" checked />
                  <div>
                    <div class="name">Ops / KPI attestations</div>
                    <div class="desc">Attested KPIs, operational traces, production constraints. Strengthens reconstructibility.</div>
                  </div>
                </label>

                <label class="sys">
                  <input type="checkbox" class="sysCheck" data-key="SEC" checked />
                  <div>
                    <div class="name">IT / Security logs</div>
                    <div class="desc">Access logs, device signals, tickets, anomalies. Critical for crisis framing & attribution.</div>
                  </div>
                </label>

                <label class="sys">
                  <input type="checkbox" class="sysCheck" data-key="LEGAL" checked />
                  <div>
                    <div class="name">Legal snapshot</div>
                    <div class="desc">Opposable snapshot markers, chain-of-custody, timestamps. Needed when proceedings are expected.</div>
                  </div>
                </label>

                <label class="sys">
                  <input type="checkbox" class="sysCheck" data-key="EXT" checked />
                  <div>
                    <div class="name">External context</div>
                    <div class="desc">Regulatory constraints, public exposure, institutional audit triggers. Used as constraints only.</div>
                  </div>
                </label>
              </div>

              <div class="hero-actions" style="margin-top:12px">
                <button class="btn primary" id="btnGenerate2">Generate</button>
                <button class="btn ghost" id="btnReset">Reset</button>
                <button class="btn" id="btnLoad2">Load example</button>
              </div>
            </div>
          </div>
        </section>

        <!-- OUTPUT -->
        <section class="subpanel" style="margin-top:18px">
          <div class="section">
            <div style="display:flex; justify-content:space-between; gap:12px; align-items:flex-start">
              <h2 class="section-title" style="margin:0">OUTPUT — Institutional reaction bundle</h2>
              <div class="badge" id="badgeCoverage">Coverage: 67%</div>
            </div>

            <div class="rows" style="margin-top:12px">
              <div class="row">
                <div class="k">Coverage</div>
                <div class="v"><span id="outCoverage">67%</span><span class="badge" id="outMissing">Missing sources: 2</span></div>
              </div>
              <div class="row">
                <div class="k">Defensibility</div>
                <div class="v"><span id="outDef">LOW (53)</span><span class="badge" id="outExp">Institutional exposure: HIGH</span></div>
              </div>
              <div class="row">
                <div class="k">Seal</div>
                <div class="v"><span>SHA-256 sealed (core)</span><span class="badge" id="outSealOk">sealed</span></div>
              </div>
              <div class="row">
                <div class="k">Public hash (sealed core)</div>
                <div class="v"><span class="mono" id="outHash">add3d8e05b73769d062da27867d2326f7ce5cb6cf74f2606f5741eb73ee61558</span></div>
              </div>

              <!-- Escalation path (the “obvious” output) -->
              <div class="row">
                <div class="k">Escalation path (institutional)</div>
                <div class="v" style="gap:14px; flex-wrap:wrap; justify-content:flex-start">
                  <span class="badge" id="escOwner">Owner set: RH</span>
                  <span class="badge" id="escIT">Add IT / Sec: YES</span>
                  <span class="badge" id="escLegal">Add Legal: YES</span>
                  <span class="badge" id="escComex">COMEX brief: REQUIRED</span>
                </div>
              </div>

              <!-- Next institutional action -->
              <div class="row">
                <div class="k">Next institutional action</div>
                <div class="v">
                  <span id="outNext" style="color:rgba(241,230,163,.88); font-weight:600">
                    Trigger escalation: add IT/Sec + Legal. Prepare COMEX brief with sealed hash + missing sources.
                  </span>
                </div>
              </div>
            </div>

            <div class="hint" style="margin-top:12px">
              This path is triggered by defensibility + exposure bands. It does not claim “truth”; it structures institutional reaction.
            </div>

            <div class="tabs">
              <div class="tab active" data-tab="preview">Preview</div>
              <div class="tab" data-tab="sealed">Sealed JSON</div>
              <div class="tab" data-tab="proof">Proof &amp; invariants</div>
            </div>

            <div class="codebox" id="tabPreview">
              <div class="mono" id="previewText"></div>
            </div>

            <div class="codebox" id="tabSealed" style="display:none">
              <pre class="mono" id="sealedJson" style="margin:0"></pre>
            </div>

            <div class="codebox" id="tabProof" style="display:none">
              <div class="mono" id="proofText"></div>
            </div>
          </div>
        </section>

        <!-- LINEAGE & QUALITY -->
        <section class="subpanel" style="margin-top:18px">
          <div class="section">
            <h2 class="section-title">Lineage & quality checks</h2>

            <div class="rows">
              <div class="row">
                <div class="k">HRIS system</div>
                <div class="v"><span id="linSystem">HRIS</span><span class="badge">HRIS-EXTRACT-001</span></div>
              </div>
              <div class="row">
                <div class="k">Steward</div>
                <div class="v"><span id="linSteward">HR Data Steward</span><span class="badge">YES</span></div>
              </div>
              <div class="row">
                <div class="k">Freshness</div>
                <div class="v"><span id="qFresh">MEDIUM</span><span class="badge">proxy</span></div>
              </div>
              <div class="row">
                <div class="k">Completeness</div>
                <div class="v"><span id="qComp">MEDIUM</span><span class="badge">proxy</span></div>
              </div>
              <div class="row">
                <div class="k">Definition drift</div>
                <div class="v"><span id="qDrift">LOW</span><span class="badge">proxy</span></div>
              </div>
              <div class="row">
                <div class="k">Duplicates</div>
                <div class="v"><span id="qDup">LOW</span><span class="badge">proxy</span></div>
              </div>
            </div>

            <div class="hint">
              These checks are deterministic proxies. They surface exposure and reconstruction risk without implying any “truth” judgment.
            </div>
          </div>
        </section>

        <!-- DECISION SUPPORT -->
        <section class="subpanel" style="margin-top:18px">
          <div class="section">
            <h2 class="section-title">Decision support (deterministic)</h2>

            <div class="rows">
              <div class="row">
                <div class="k">Institutional exposure</div>
                <div class="v"><span id="dsExposure">HIGH</span></div>
              </div>
              <div class="row">
                <div class="k">Top blockers</div>
                <div class="v"><span id="dsBlockers">Missing security logs (crisis framing)</span></div>
              </div>
              <div class="row">
                <div class="k">Next actions</div>
                <div class="v"><span id="dsNext">Declare learning/compliance sources (LMS/TMS/LXP)</span></div>
              </div>
              <div class="row">
                <div class="k">What improves score</div>
                <div class="v"><span id="dsImprove">Stabilize uncertainty + contradictions</span></div>
              </div>
            </div>

            <div class="hint">
              This is not a “decision engine”. It is a defensibility layer: it tells you what is missing to make a decision reconstructible.
            </div>
          </div>
        </section>

        <!-- BOTTOM CTA -->
        <section class="panel bottom-cta" style="margin-top:18px">
          <div>
            <h4>Ready for the pilot cockpit?</h4>
            <p>
              Move from a deterministic simulator to a real ProofOps workflow: connectors, traceable extracts, sealed bundles, and repeatable decision defense.
              Same principle: integrity, readability, verifiability — with an operational cockpit.
            </p>
          </div>
          <a class="btn primary" href="#" target="_blank" rel="noopener noreferrer">PILOT COCKPIT</a>
        </section>

        <footer class="footer">
          <div>© OpenProof — RPO v0.1. Created by Gersende Ryard de Parcey.</div>
          <div style="display:flex; gap:12px; flex-wrap:wrap; justify-content:flex-end">
            <a href="#" target="_blank" rel="noopener noreferrer">Spec</a>
            <span style="opacity:.35">·</span>
            <a href="#" target="_blank" rel="noopener noreferrer">Simulator</a>
            <span style="opacity:.35">·</span>
            <a href="#" target="_blank" rel="noopener noreferrer">Examples</a>
          </div>
        </footer>
      </div>

      <!-- RIGHT COLUMN: STICKY COCKPIT -->
      <aside class="subpanel cockpit" aria-label="Simulator cockpit">
        <div class="title">
          <div>
            <h3>Simulator cockpit (live)</h3>
            <div class="mini"><span class="chip" style="height:26px; padding:0 10px"><span class="led"></span> Integrity • Readability • Verifiability</span></div>
          </div>
        </div>

        <div class="metric">
          <div class="k">Scope</div>
          <div class="v" id="cScope">Industrial group — multi-sites, multi-entities (EU + non-EU)</div>
        </div>
        <div class="metric">
          <div class="k">Moment T</div>
          <div class="v" id="cMoment">2026-02-18</div>
        </div>
        <div class="metric">
          <div class="k">Coverage</div>
          <div class="v" id="cCoverage">67%</div>
        </div>
        <div class="metric">
          <div class="k">Defensibility</div>
          <div class="v" id="cDef">LOW (53)</div>
        </div>
        <div class="metric">
          <div class="k">Institutional exposure</div>
          <div class="v" id="cExp">HIGH</div>
        </div>
        <div class="metric">
          <div class="k">Hash</div>
          <div class="v" id="cHash">add3d8e05b…</div>
        </div>

        <div class="note">
          Right panel is a “decision defense cockpit”: it summarizes reconstructibility at Moment T. It does not claim truth.
        </div>
      </aside>
    </section>
  </main>

  <script>
    // --- Helpers
    const $ = (sel) => document.querySelector(sel);
    const $$ = (sel) => Array.from(document.querySelectorAll(sel));

    function clamp(n, a, b){ return Math.max(a, Math.min(b, n)); }

    // Deterministic-ish pseudo hash (for demo only)
    async function sha256Hex(text){
      const enc = new TextEncoder().encode(text);
      const buf = await crypto.subtle.digest('SHA-256', enc);
      const arr = Array.from(new Uint8Array(buf));
      return arr.map(b => b.toString(16).padStart(2,'0')).join('');
    }

    function contextCopy(key){
      if(key === 'governance') return {
        name: 'Governance',
        lead: 'Governance context: audit defensibility, traceability, definitions stability, and reconstruction at Moment T. Focus on perimeter and accountability.'
      };
      if(key === 'judicial') return {
        name: 'Judicial procedures',
        lead: 'Judicial context: opposability, chain-of-custody discipline, and documentary invariants. Focus on sealed artifacts and reproducible reconstruction.'
      };
      return {
        name: 'Institutional Crisis',
        lead: 'Institutional crisis context: escalation readiness, stakeholder mapping, uncertainty logging, and reconstruction under pressure. Focus on fast, defensible reaction.'
      };
    }

    function scoreFromSelection(selectedKeys){
      // Simple deterministic scoring model (demo): coverage tied to declared systems
      const total = 6;
      const selected = selectedKeys.length;
      const coverage = Math.round((selected / total) * 100);

      // missing = systems not selected among key risk ones
      const mustHave = ['HRIS','SEC','LEGAL'];
      const missingMust = mustHave.filter(k => !selectedKeys.includes(k)).length;
      const missing = clamp(missingMust + (total - selected > 2 ? 1 : 0), 0, 4);

      // defensibility heuristic
      let def = 40 + selected * 8 - missing * 6; // base
      def = clamp(def, 35, 92);

      // exposure heuristic
      const exposure = (missing >= 2 || def < 55) ? 'HIGH' : (def < 70 ? 'MEDIUM' : 'LOW');

      return { coverage, missing, def, exposure };
    }

    function escalationFromBands(def, exposure){
      // Deterministic escalation banding
      const owner = 'RH';
      const addIT = (exposure === 'HIGH' || def < 65) ? 'YES' : 'NO';
      const addLegal = (exposure !== 'LOW' || def < 70) ? 'YES' : 'NO';
      const comex = (exposure === 'HIGH' || def < 58) ? 'REQUIRED' : 'OPTIONAL';

      let next = 'Continue data stabilization. Improve completeness and lineage.';
      if(comex === 'REQUIRED'){
        next = 'Trigger escalation: add IT/Sec + Legal. Prepare COMEX brief with sealed hash + missing sources.';
      } else if(addLegal === 'YES'){
        next = 'Escalate to Legal for opposability framing. Seal snapshot and log uncertainties.';
      } else if(addIT === 'YES'){
        next = 'Add IT/Sec traces. Consolidate tickets + access logs and re-run reconstructibility.';
      }
      return { owner, addIT, addLegal, comex, next };
    }

    function formatDateISO(yyyy_mm_dd){
      // keep as YYYY-MM-DD
      return yyyy_mm_dd || '';
    }

    function shortHash(h){
      if(!h) return '—';
      return h.slice(0,10) + '…';
    }

    // --- State
    const state = {
      generated: true,
      context: 'crisis',
      scope: $('#scope').value,
      authority: $('#authority').value,
      moment: $('#moment').value,
      decisionType: $('#decisionType').value,
      constraints: $('#constraints').value,
      systems: ['HRIS','LMS','OPS','SEC','LEGAL','EXT'],
      score: { coverage: 67, missing: 2, def: 53, exposure: 'HIGH' },
      escalation: { owner:'RH', addIT:'YES', addLegal:'YES', comex:'REQUIRED', next:'' },
      hash: 'add3d8e05b73769d062da27867d2326f7ce5cb6cf74f2606f5741eb73ee61558'
    };

    // --- Render functions
    function updateHeroContext(){
      const ctx = contextCopy(state.context);
      $('#chipContext').textContent = ctx.name;
      $('#contextLead').textContent = ctx.lead;

      // simple chips toggles
      $('#chipMoment').textContent = state.moment || '—';
      $('#chipStakeholders').textContent = (state.context === 'crisis') ? 'enabled' : 'optional';
      $('#chipUnc').textContent = (state.context !== 'governance') ? 'enabled' : 'optional';
      $('#chipLineage').textContent = 'enabled';
      $('#chipExposure').textContent = state.score.exposure;
      $('#chipHash').textContent = shortHash(state.hash);
    }

    function updateCockpit(){
      $('#cScope').textContent = state.scope || '—';
      $('#cMoment').textContent = state.moment || '—';
      $('#cCoverage').textContent = `${state.score.coverage}%`;
      $('#cDef').textContent = `${bandLabelDef(state.score.def)} (${state.score.def})`;
      $('#cExp').textContent = state.score.exposure;
      $('#cHash').textContent = shortHash(state.hash);
    }

    function bandLabelDef(def){
      if(def < 55) return 'LOW';
      if(def < 75) return 'MEDIUM';
      return 'HIGH';
    }

    function updateOutput(){
      $('#badgeCoverage').textContent = `Coverage: ${state.score.coverage}%`;
      $('#outCoverage').textContent = `${state.score.coverage}%`;
      $('#outMissing').textContent = `Missing sources: ${state.score.missing}`;
      $('#outDef').textContent = `${bandLabelDef(state.score.def)} (${state.score.def})`;
      $('#outExp').textContent = `Institutional exposure: ${state.score.exposure}`;
      $('#outHash').textContent = state.hash;

      $('#escOwner').textContent = `Owner set: ${state.escalation.owner}`;
      $('#escIT').textContent = `Add IT / Sec: ${state.escalation.addIT}`;
      $('#escLegal').textContent = `Add Legal: ${state.escalation.addLegal}`;
      $('#escComex').textContent = `COMEX brief: ${state.escalation.comex}`;
      $('#outNext').textContent = state.escalation.next;

      // Decision support block
      $('#dsExposure').textContent = state.score.exposure;
      const blockers = [];
      if(!state.systems.includes('SEC')) blockers.push('Missing security logs (crisis framing)');
      if(!state.systems.includes('LMS')) blockers.push('Missing learning/compliance sources (LMS/TMS/LXP)');
      if(!state.systems.includes('LEGAL')) blockers.push('Missing legal snapshot (opposability)');
      $('#dsBlockers').textContent = blockers.length ? blockers.join(' · ') : '—';

      const nextActions = [];
      if(!state.systems.includes('SEC')) nextActions.push('Add IT/Security logs + ticketing traces');
      if(!state.systems.includes('LMS')) nextActions.push('Declare learning/compliance sources (LMS/TMS/LXP)');
      if(state.context === 'crisis') nextActions.push('Stabilize uncertainty + contradictions');
      $('#dsNext').textContent = nextActions.length ? nextActions[0] : '—';
      $('#dsImprove').textContent = (state.score.def < 70) ? 'Stabilize uncertainty + contradictions' : 'Consolidate lineage + definitions';

      // Preview / sealed json / proof text
      const declared = state.systems.join(', ');
      $('#previewText').textContent =
`Decision: ${state.decisionType}
Scope: ${state.scope}
Authority: ${state.authority}
Moment T: ${state.moment}
Declared sources: ${declared}
Coverage: ${state.score.coverage}% | Missing: ${state.score.missing}
Defensibility: ${bandLabelDef(state.score.def)} (${state.score.def}/100)
Institutional exposure: ${state.score.exposure}

Escalation path:
- Owner set = ${state.escalation.owner}
- Add IT/Sec = ${state.escalation.addIT}
- Add Legal = ${state.escalation.addLegal}
- COMEX brief required = ${state.escalation.comex}
- Next institutional action = ${state.escalation.next}

Lineage (example):
- HRIS: HRIS | extract_id: HRIS-EXTRACT-001

Quality checks:
- Freshness: MEDIUM | Completeness: MEDIUM
- Definition drift: LOW | Duplicates: LOW | Risk: MEDIUM

Seal:
- SHA-256 (sealed core): ${state.hash}
Note: the hash proves integrity over time, not "truth".`;

      $('#sealedJson').textContent = JSON.stringify(buildSealedJSON(), null, 2);

      $('#proofText').textContent =
`Invariants (audit-ready)
- Context: ${contextCopy(state.context).name.toLowerCase()}
- Moment T: ${state.moment}
- Scope / Authority: ${state.scope} / ${state.authority}
- Declared sources: ${declared}
- Coverage: ${state.score.coverage}% (selected ${state.systems.length}/6)
- Scoring: coverage-weight=0.4, quality-weight=0.2, constraints-weight=0.4
- Exposure: ${state.score.exposure} (deterministic rule)
- Escalation band: ${state.escalation.comex === 'REQUIRED' ? 'CRITICAL' : (state.escalation.addLegal === 'YES' ? 'ELEVATED' : 'NORMAL')}
- Hash: ${state.hash}
Note: this artifact stabilizes the record at Moment T. It does not "decide truth".`;
    }

    function buildSealedJSON(){
      return {
        rpo_version: "0.1",
        engine: "openproof-simulator",
        context: contextCopy(state.context).name,
        moment_t: state.moment,
        decision_type: state.decisionType,
        scope: state.scope,
        authority: state.authority,
        declared_sources: state.systems,
        scoring: {
          coverage: state.score.coverage,
          missing_sources: state.score.missing,
          defensibility: state.score.def,
          institutional_exposure: state.score.exposure
        },
        escalation_path: {
          owner_set: state.escalation.owner,
          add_it_sec: state.escalation.addIT,
          add_legal: state.escalation.addLegal,
          comex_brief_required: state.escalation.comex,
          next_institutional_action: state.escalation.next
        },
        lineage: {
          hris: { system: "HRIS", extract_id: "HRIS-EXTRACT-001", steward: "HR Data Steward" }
        },
        quality_checks: {
          freshness: "MEDIUM",
          completeness: "MEDIUM",
          definition_drift: "LOW",
          duplicates: "LOW",
          risk: "MEDIUM"
        },
        constraints: state.constraints,
        seal: {
          algo: "SHA-256",
          sealed_core_hash: state.hash,
          note: "Hash proves integrity over time, not truth."
        }
      };
    }

    async function regenerate(){
      // pull inputs
      state.context = $('#contextSelect').value;
      state.scope = $('#scope').value.trim();
      state.authority = $('#authority').value.trim();
      state.moment = formatDateISO($('#moment').value);
      state.decisionType = $('#decisionType').value;
      state.constraints = $('#constraints').value;

      // systems
      state.systems = $$('.sysCheck').filter(c => c.checked).map(c => c.dataset.key);

      // scoring
      state.score = scoreFromSelection(state.systems);

      // escalation
      state.escalation = escalationFromBands(state.score.def, state.score.exposure);

      // hash = deterministic from key fields (demo)
      const core = JSON.stringify({
        c: state.context, s: state.scope, a: state.authority, t: state.moment,
        d: state.decisionType, sys: state.systems, sc: state.score
      });
      state.hash = await sha256Hex(core);

      // update UI
      updateHeroContext();
      updateCockpit();
      updateOutput();
    }

    function loadExample(){
      $('#contextSelect').value = 'crisis';
      $('#decisionType').value = 'Institutional crisis decision';
      $('#scope').value = 'Industrial group — multi-sites, multi-entities (EU + non-EU)';
      $('#authority').value = 'Group HR Authority';
      $('#moment').value = '2026-02-18';
      $('#constraints').value =
`Crisis framing: signals, stakeholders, constraints.
Stabilize uncertainty + contradictions. Prepare escalation to Legal / IT / COMEX as needed.`;

      // default selection: all except one to show missing sources effect
      $$('.sysCheck').forEach(c => c.checked = true);
      // Example: uncheck one to create a “story”
      // (comment this out if you want full coverage by default)
      // $$('.sysCheck').find(c => c.dataset.key === 'SEC').checked = false;

      // Trigger render
      regenerate();
    }

    function resetForm(){
      loadExample(); // keeping your “demo-ready” defaults
    }

    // --- Tabs
    function setTab(name){
      $$('.tab').forEach(t => t.classList.toggle('active', t.dataset.tab === name));
      $('#tabPreview').style.display = (name === 'preview') ? 'block' : 'none';
      $('#tabSealed').style.display  = (name === 'sealed') ? 'block' : 'none';
      $('#tabProof').style.display   = (name === 'proof') ? 'block' : 'none';
    }

    // --- Live cockpit (update on input)
    function bindLive(){
      const live = () => {
        state.scope = $('#scope').value.trim();
        state.moment = formatDateISO($('#moment').value);
        $('#chipMoment').textContent = state.moment || '—';
        updateCockpit();
      };
      ['input','change'].forEach(evt=>{
        $('#scope').addEventListener(evt, live);
        $('#moment').addEventListener(evt, live);
        $('#contextSelect').addEventListener(evt, () => {
          state.context = $('#contextSelect').value;
          updateHeroContext();
        });
      });
    }

    // --- Events
    $('#btnGenerate').addEventListener('click', regenerate);
    $('#btnGenerate2').addEventListener('click', regenerate);
    $('#btnLoad').addEventListener('click', loadExample);
    $('#btnLoad2').addEventListener('click', loadExample);
    $('#btnReset').addEventListener('click', resetForm);

    $$('.sysCheck').forEach(c => c.addEventListener('change', regenerate));
    $$('.tab').forEach(t => t.addEventListener('click', () => setTab(t.dataset.tab)));

    // Init
    bindLive();
    loadExample();
  </script>
</body>
</html>



