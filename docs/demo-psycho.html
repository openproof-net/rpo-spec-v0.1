<!DOCTYPE html>
<html lang="en" data-page="demo-psycho">
<head>
  <meta charset="UTF-8" />
  <title>OpenProof — Psycho-forensic demo | From raw story to control patterns</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="author" content="Gersende Ryard de Parcey">
  <meta name="creator" content="Gersende Ryard de Parcey, OpenProof specification editor">

  <!-- SEO -->
  <meta name="description"
        content="Psycho-forensic demo on top of the RPO standard. Paste a short narrative and see structural control patterns, coercion score, and highlighted sensitive passages. Runs locally, deterministic, no AI." />
  <link rel="canonical" href="https://rpo.openproof.net/demo-psycho.html" />

  <!-- Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="OpenProof — Psycho-forensic narrative demo" />
  <meta property="og:description"
        content="From raw story to control patterns: a rule-based psycho-forensic layer on top of the RPO standard. Coercion score, risk hints and narrative profile (phenotype)." />
  <meta property="og:url" content="https://rpo.openproof.net/demo-psycho.html" />
  <meta property="og:image"
        content="https://uploads.strikinglycdn.com/files/5b108f2f-0feb-4789-a4dd-d1d21cd5eec6/Capture%20d%E2%80%99e%CC%81cran%202025-11-01%20a%CC%80%2016.30.35.png" />

  <!-- Favicon OpenProof -->
  <link
    rel="icon"
    type="image/png"
    href="https://uploads.strikinglycdn.com/files/5b108f2f-0feb-4789-a4dd-d1d21cd5eec6/Capture%20d%E2%80%99e%CC%81cran%202025-11-01%20a%CC%80%2016.30.35.png"
  />

  <!-- Global dark/ivory/gold theme (same base as overview/examples/tests) -->
  <style>
    :root {
      --bg: #04040e;
      --bg-elevated: #0b0f14;
      --panel: #f7f3e8;
      --panel-soft: #fbf8f1;
      --text-main: #f5f5f7;
      --text-muted: #b2b7c5;
      --ink: #7a6432;
      --gold: #d4af37;
      --gold-soft: #f1e6a3;
      --border-soft: rgba(241, 230, 163, 0.2);
      --shadow-soft: 0 18px 45px rgba(0, 0, 0, 0.45);
      --radius-lg: 18px;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, system-ui, "SF Pro Text",
        "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #111625 0, var(--bg) 45%);
      color: var(--text-main);
      -webkit-font-smoothing: antialiased;
    }

    a {
      color: var(--gold-soft);
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    /* NAVBAR (universal) */
    .nav {
      position: sticky;
      top: 0;
      z-index: 20;
      backdrop-filter: blur(16px);
      background: linear-gradient(
        90deg,
        rgba(4, 4, 14, 0.96),
        rgba(4, 4, 14, 0.92)
      );
      border-bottom: 1px solid var(--border-soft);
    }

    .nav-inner {
      max-width: 1120px;
      margin: 0 auto;
      padding: 0.65rem 1.5rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
    }

    .nav-left {
      display: flex;
      align-items: center;
      gap: 0.9rem;
    }

    .nav-logo-link {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      text-decoration: none;
      color: var(--text-main);
    }

    .nav-logo {
      width: 40px;
      height: 40px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 20%, #f3e8b2, #b88c2a);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow:
        0 0 0 1px rgba(0, 0, 0, 0.4),
        0 10px 25px rgba(0, 0, 0, 0.6);
    }

    .nav-logo img {
      width: 28px;
      height: 28px;
      border-radius: 999px;
      display: block;
    }

    .nav-title {
      font-size: 0.95rem;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--gold-soft);
    }

    .nav-subtitle {
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .nav-links {
      display: flex;
      align-items: center;
      gap: 1rem;
      font-size: 0.9rem;
    }

    .nav-link {
      color: var(--text-muted);
      text-decoration: none;
      border: none;
      background: none;
      font: inherit;
      padding: 0;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
    }

    .nav-link:hover {
      color: var(--gold-soft);
      text-decoration: none;
    }

    .btn-ghost {
      border-radius: 999px;
      padding: 0.4rem 0.95rem;
      border: 1px solid var(--border-soft);
      font-size: 0.85rem;
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      text-decoration: none;
      color: var(--gold-soft);
      background: rgba(10, 14, 24, 0.9);
      white-space: nowrap;
    }

    .btn-ghost span {
      font-size: 0.9rem;
    }

    .btn-ghost:hover {
      border-color: var(--gold-soft);
      text-decoration: none;
      background: rgba(13, 18, 30, 0.95);
    }

    /* Dropdown “Technical docs” */
    .nav-dropdown {
      position: relative;
    }

    .nav-dropdown-caret {
      font-size: 0.7rem;
    }

    .nav-dropdown-menu {
      position: absolute;
      top: 130%;
      right: 0;
      min-width: 180px;
      padding: 0.4rem 0;
      border-radius: 12px;
      background: #070913;
      border: 1px solid var(--border-soft);
      box-shadow: var(--shadow-soft);
      display: none;
      z-index: 30;
    }

    .nav-dropdown-menu .nav-link {
      width: 100%;
      padding: 0.35rem 0.9rem;
      justify-content: flex-start;
      color: var(--text-muted);
    }

    .nav-dropdown-menu .nav-link:hover {
      background: rgba(241, 230, 163, 0.08);
      color: var(--gold-soft);
    }

    .nav-dropdown:hover .nav-dropdown-menu,
    .nav-dropdown:focus-within .nav-dropdown-menu {
      display: block;
    }

    @media (max-width: 900px) {
      .nav-inner {
        flex-direction: column;
        align-items: flex-start;
      }
      .nav-links {
        flex-wrap: wrap;
      }
      .btn-ghost {
        align-self: flex-start;
      }
    }

    /* HERO (base) */
    .hero {
      padding: 3.2rem 1.5rem 2.4rem;
    }

    .hero-inner {
      max-width: 1120px;
      margin: 0 auto;
    }

    .hero-kicker {
      font-size: 0.8rem;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: var(--gold-soft);
      margin-bottom: 0.75rem;
    }

    .hero-title {
      font-size: clamp(2.1rem, 3vw, 2.6rem);
      line-height: 1.2;
      margin: 0 0 0.75rem;
    }

    .hero-title span {
      color: var(--gold-soft);
    }

    .hero-subtitle {
      font-size: 0.98rem;
      color: var(--text-muted);
      max-width: 46rem;
      margin-bottom: 1.4rem;
    }

    .hero-badges {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-bottom: 1.6rem;
    }

    .badge {
      font-size: 0.8rem;
      padding: 0.18rem 0.6rem;
      border-radius: 999px;
      border: 1px solid rgba(241, 230, 163, 0.3);
      color: var(--gold-soft);
      background: rgba(11, 15, 20, 0.9);
    }

    /* MAIN LAYOUT */
    .main {
      padding: 0 1.5rem 3.5rem;
    }

    .section-title {
      max-width: 1120px;
      margin: 0 auto 0.9rem;
      padding: 0 0.1rem;
      font-size: 0.85rem;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      color: var(--text-muted);
    }

    /* Footer (universal) */
    .footer {
      border-top: 1px solid var(--border-soft);
      background: radial-gradient(circle at top, #101525, #020308);
      padding: 1.6rem 1.5rem 2.1rem;
      color: var(--text-muted);
      font-size: 0.82rem;
    }

    .footer-inner {
      max-width: 1120px;
      margin: 0 auto;
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      gap: 0.8rem;
    }

    .footer-left strong {
      color: var(--gold-soft);
      font-weight: 500;
    }

    .footer-links {
      display: flex;
      flex-wrap: wrap;
      gap: 0.9rem;
    }

    .footer-links a {
      color: var(--text-muted);
      text-decoration: none;
    }

    .footer-links a:hover {
      color: var(--gold-soft);
      text-decoration: underline;
    }

    /* Active nav state driven by data-page on <html> */
    html[data-page="overview"] .nav-link--overview {
      color: #f1e6a3;
    }

    html[data-page="spec"] .nav-link--spec {
      color: #f1e6a3;
    }

    html[data-page="examples"] .nav-link--examples {
      color: #f1e6a3;
    }

    html[data-page="tests"] .nav-link--tests {
      color: #f1e6a3;
    }

    html[data-page="playground"] .nav-link--playground {
      color: #f1e6a3;
    }

    html[data-page="demo-psycho"] .nav-link--psycho {
      color: #f1e6a3;
    }

    html[data-page="demo-legal"] .nav-link--legal {
      color: #f1e6a3;
    }

    html[data-page="demo-legal-mapping"] .nav-link--legal-mapping {
      color: #f1e6a3;
    }

    /* ====== PSYCHO DEMO SPECIFIC STYLES ====== */

    .hero-inner-psy {
      max-width: 1120px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: minmax(0, 1.7fr) minmax(0, 1.3fr);
      gap: 2.4rem;
      align-items: flex-start;
    }

    .hero-extra {
      font-size: 0.9rem;
      color: var(--text-muted);
      max-width: 46rem;
      margin-bottom: 1.2rem;
    }

    .hero-card {
      background: radial-gradient(circle at top left, #151b28, #050813 55%);
      border-radius: var(--radius-lg);
      border: 1px solid rgba(255, 255, 255, 0.06);
      box-shadow: var(--shadow-soft);
      padding: 1.1rem 1.3rem 1.3rem;
      color: #e2e6f0;
      position: relative;
      overflow: hidden;
    }

    .hero-card::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at top right, rgba(255, 223, 133, 0.18), transparent 55%);
      opacity: 0.9;
      pointer-events: none;
    }

    .hero-card-inner {
      position: relative;
      z-index: 1;
    }

    .hero-card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.4rem;
    }

    .hero-card-title {
      font-size: 0.78rem;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: #f7f0d0;
    }

    .hero-card-badge {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      padding: 0.15rem 0.6rem;
      border-radius: 999px;
      border: 1px solid rgba(245, 226, 154, 0.7);
      background: rgba(10, 10, 15, 0.9);
      color: #f5e29e;
    }

    .hero-card-list {
      margin: 0.4rem 0 0.2rem;
      padding-left: 1.1rem;
      font-size: 0.86rem;
      line-height: 1.55;
      color: #d1d8e5;
    }

    .hero-card-list li {
      margin-bottom: 0.25rem;
    }

    .hero-card-foot {
      margin-top: 0.5rem;
      font-size: 0.78rem;
      color: #9ca5b8;
    }

    .hero-card-foot em {
      font-style: normal;
      color: #f3d99b;
    }

    /* Playground layout */
    .psy-inner {
      max-width: 1120px;
      margin: 0 auto;
    }

    .playground-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.05fr) minmax(0, 1.25fr);
      gap: 1.8rem;
      margin-bottom: 1.4rem;
    }

    .card {
      background: linear-gradient(145deg, var(--panel), var(--panel-soft));
      color: var(--ink);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-soft);
      border-top: 3px solid var(--gold);
      border-left: 1px solid rgba(0, 0, 0, 0.05);
      border-right: 1px solid rgba(0, 0, 0, 0.03);
      padding: 1.5rem 1.6rem 1.6rem;
      position: relative;
    }

    .card h2 {
      margin: 0 0 0.4rem;
      font-size: 0.95rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: #5c4721;
    }

    .card small {
      font-size: 0.8rem;
      color: #8b7c60;
    }

    .field-label {
      font-size: 0.74rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: #8b7c63;
      margin-bottom: 0.25rem;
      margin-top: 0.85rem;
    }

    .select,
    .textarea {
      width: 100%;
      font-family: inherit;
      font-size: 0.85rem;
      border-radius: 10px;
      border: 1px solid rgba(120, 96, 56, 0.35);
      padding: 0.45rem 0.6rem;
      background: rgba(255, 255, 255, 0.9);
      color: #2f2515;
      outline: none;
    }

    .select:focus,
    .textarea:focus {
      border-color: var(--gold);
      box-shadow: 0 0 0 1px rgba(212, 175, 55, 0.5);
    }

    .textarea {
      resize: vertical;
      min-height: 150px;
    }

    .field-tip {
      font-size: 0.78rem;
      color: #8c7b60;
      margin-top: 0.3rem;
    }

    .button-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 0.9rem;
    }

    .btn {
      border-radius: 999px;
      font-size: 0.82rem;
      font-weight: 500;
      padding: 0.5rem 0.95rem;
      border: none;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      white-space: nowrap;
    }

    .btn-primary {
      background: radial-gradient(circle at top left, #f7e6ba, #d4af37);
      color: #261c09;
      box-shadow: 0 12px 32px rgba(0, 0, 0, 0.35);
    }

    .btn-secondary {
      background: #f2e4c5;
      color: #4d3c1e;
      border: 1px solid rgba(145, 118, 61, 0.4);
    }

    .btn-ghost-local {
      background: transparent;
      color: #6b5730;
      border: 1px dashed rgba(120, 96, 56, 0.6);
    }

    .btn:hover {
      filter: brightness(1.03);
      transform: translateY(-0.5px);
    }

    /* Right panel */
    .score-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 0.85rem;
      margin-top: 0.9rem;
      margin-bottom: 0.6rem;
    }

    .score-box {
      background: var(--panel-soft);
      border-radius: 16px;
      border: 1px solid rgba(122, 103, 62, 0.35);
      padding: 0.6rem 0.7rem 0.65rem;
    }

    .score-label {
      font-size: 0.7rem;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      color: #8b7547;
      margin-bottom: 0.2rem;
    }

    .score-value {
      font-size: 1.25rem;
      font-weight: 600;
      color: #30200b;
      display: flex;
      align-items: baseline;
      gap: 0.25rem;
    }

    .score-value span {
      font-size: 0.75rem;
      color: #7d6947;
      font-weight: 500;
    }

    .score-note {
      font-size: 0.74rem;
      margin-top: 0.1rem;
      color: #7a6340;
    }

    .score-note--risk {
      color: #a1441d;
    }

    .mechanisms {
      margin-top: 0.35rem;
      margin-bottom: 0.5rem;
      font-size: 0.85rem;
      color: #4e3a20;
    }

    .mechanisms strong {
      font-weight: 600;
    }

    .subsection-title {
      margin-top: 0.85rem;
      margin-bottom: 0.3rem;
      font-size: 0.76rem;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: #8a7750;
    }

    .matrix-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 0.25rem;
      font-size: 0.84rem;
    }

    .matrix-table th,
    .matrix-table td {
      padding: 0.35rem 0.35rem;
    }

    .matrix-table thead th {
      font-size: 0.72rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: #8d7b5c;
      border-bottom: 1px solid rgba(138, 114, 70, 0.4);
    }

    .matrix-table tbody tr:nth-child(odd) {
      background: rgba(248, 239, 222, 0.9);
    }

    .matrix-table tbody tr:nth-child(even) {
      background: rgba(246, 234, 213, 0.95);
    }

    .matrix-axis {
      color: #3a2710;
      white-space: nowrap;
    }

    .matrix-level-pill {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      min-width: 105px;
      padding: 0.18rem 0.45rem;
      border-radius: 999px;
      font-size: 0.72rem;
      font-weight: 600;
      border: 1px solid rgba(170, 96, 40, 0.4);
      background: #ffe3d3;
      color: #a1441d;
    }

    .matrix-level-pill--present {
      background: #fff3d3;
      border-color: rgba(172, 133, 52, 0.45);
      color: #886123;
    }

    .matrix-level-pill--none {
      background: #f1ebe0;
      border-style: dashed;
      border-color: rgba(145, 126, 90, 0.55);
      color: #8a7c5c;
      font-weight: 500;
    }

    .signals-list {
      font-size: 0.84rem;
      margin: 0;
      padding-left: 1.1rem;
      color: #4e3a20;
    }

    .signals-list li {
      margin-bottom: 0.15rem;
    }

    .phenotype-text {
      font-size: 0.85rem;
      color: #4a371d;
      line-height: 1.55;
    }

    .story-box {
      margin-top: 0.4rem;
      padding: 0.55rem 0.7rem;
      border-radius: 14px;
      background: #fff9ec;
      border: 1px dashed rgba(159, 130, 63, 0.75);
      font-size: 0.85rem;
      line-height: 1.55;
      color: #3d2d15;
    }

    .highlight {
      background: #ffe9a8;
      border-radius: 6px;
      padding: 0 2px;
      box-shadow: 0 0 0 1px rgba(223, 186, 92, 0.4);
    }

    .demo-disclaimer {
      margin-top: 0.4rem;
      font-size: 0.78rem;
      color: #8b7b5c;
    }

    .demo-disclaimer strong {
      font-weight: 600;
      color: #674d25;
    }

    .band-real-case {
      margin-top: 1.4rem;
      background: radial-gradient(
        circle at top left,
        rgba(255, 230, 170, 0.16),
        rgba(6, 8, 18, 0.96)
      );
      border-radius: 18px;
      border: 1px solid rgba(255, 236, 179, 0.28);
      padding: 0.9rem 1rem;
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: center;
      gap: 0.8rem;
      color: #f3eddc;
      font-size: 0.86rem;
    }

    .band-real-case p {
      margin: 0;
      max-width: 720px;
    }

    .band-real-case em {
      font-style: normal;
      color: #f7dfa0;
    }

    .band-cta {
      border-radius: 999px;
      border: 1px solid rgba(248, 228, 170, 0.9);
      background: radial-gradient(circle at top left, #f7e6b7, #d4af37);
      color: #261a06;
      padding: 0.5rem 1.1rem;
      font-size: 0.85rem;
      font-weight: 500;
      cursor: pointer;
      white-space: nowrap;
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.6);
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }

    .band-cta:hover {
      filter: brightness(1.03);
      transform: translateY(-0.5px);
    }

    /* Responsive */
    @media (max-width: 960px) {
      .hero-inner-psy {
        grid-template-columns: minmax(0, 1fr);
      }
      .playground-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    @media (max-width: 720px) {
      .hero {
        padding-inline: 1rem;
      }
      .main {
        padding-inline: 1rem;
      }
      .card {
        padding-inline: 1.2rem;
      }
      .score-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }
  </style>
</head>
<body>
  <!-- UNIVERSAL NAVBAR -->
  <header class="nav">
    <div class="nav-inner">
      <div class="nav-left">
        <a href="overview.html" class="nav-logo-link">
          <div class="nav-logo">
            <img
              src="https://uploads.strikinglycdn.com/files/5b108f2f-0feb-4789-a4dd-d1d21cd5eec6/Capture%20d%E2%80%99e%CC%81cran%202025-11-01%20a%CC%80%2016.30.35.png"
              alt="OpenProof logo"
            />
          </div>
          <div>
            <div class="nav-title">OPENPROOF — RPO v0.1</div>
            <div class="nav-subtitle">Signed JSON • Human-readable PDF • Public hash</div>
          </div>
        </a>
      </div>

      <nav class="nav-links" aria-label="Primary navigation">
        <!-- Public layer -->
        <a href="overview.html" class="nav-link nav-link--overview">Overview</a>
        <a href="demo-psycho.html" class="nav-link nav-link--psycho">Psycho-legal demo</a>
        <a href="demo-legal.html" class="nav-link nav-link--legal">Legal demo</a>
        <a href="demo-legal-mapping.html" class="nav-link nav-link--legal-mapping">Legal mapping</a>
        <a href="sandbox.html" class="nav-link nav-link--playground">Sandbox</a>

        <!-- Technical docs dropdown -->
        <div class="nav-dropdown">
          <button class="nav-link nav-dropdown-toggle" type="button">
            Technical docs <span class="nav-dropdown-caret">▾</span>
          </button>
          <div class="nav-dropdown-menu" role="menu">
            <a href="index.html" class="nav-link nav-link--spec" role="menuitem">Specification</a>
            <a href="examples.html" class="nav-link nav-link--examples" role="menuitem">Examples</a>
            <a href="tests.html" class="nav-link nav-link--tests" role="menuitem">Tests</a>
          </div>
        </div>
      </nav>

      <a
        href="https://github.com/openproof-net/rpo-spec-v0.1"
        class="btn-ghost"
        target="_blank"
        rel="noopener noreferrer"
      >
        <span>View on GitHub</span>
      </a>
    </div>
  </header>

  <!-- HERO -->
  <section class="hero">
    <div class="hero-inner hero-inner-psy">
      <div>
        <div class="hero-kicker">RPO demonstration layer • narrative mechanisms</div>
        <h1 class="hero-title">
          Try the <span>Psycho-forensic</span> demo<br />
          — from raw story to control patterns
        </h1>
        <p class="hero-subtitle">
          Paste a short narrative about a potential coercive situation (domestic, workplace,
          institutional or online). This demo surfaces structural control patterns, estimates
          a rough coercion score, and highlights the narrative profile. Everything runs
          locally in your browser — no AI model.
        </p>
        <p class="hero-extra">
          In the scientific <strong>CNRS × TruthX</strong> pilot, this layer is powered by advanced
          psycho-forensic modules able to ingest message streams, reports and transcripts. Here
          you see a simplified and transparent narrative decoder that already reveals structural
          control schemes on top of the RPO “civil code”.
        </p>
        <div class="hero-badges">
          <div class="badge">Rule-based models</div>
          <div class="badge">No AI, deterministic</div>
          <div class="badge">Coercive control focus</div>
          <div class="badge">RPO-compatible narrative layer</div>
        </div>
      </div>

      <aside class="hero-card">
        <div class="hero-card-inner">
          <div class="hero-card-header">
            <div class="hero-card-title">What this demo illustrates</div>
            <div class="hero-card-badge">Demo mode</div>
          </div>
          <ul class="hero-card-list">
            <li>Detection of narrative control mechanisms (locking, threats, economic pressure,
                surveillance, normalisation).</li>
            <li>Aggregation into a mini-matrix of coercive control axes.</li>
            <li>Approximate coercion score and narrative risk level for the story.</li>
            <li>Highlighting of sensitive passages and the resulting narrative profile (phenotype).</li>
          </ul>
          <p class="hero-card-foot">
            In a full evaluation, this overlay would be one part of a broader
            <em>psycho-medical-forensic assessment</em> carried out by qualified professionals.
            This demo simply shows how structured patterns can be made visible.
          </p>
        </div>
      </aside>
    </div>
  </section>

  <!-- MAIN -->
  <main class="main">
    <div class="psy-inner">
      <div class="section-title">Play with a narrative</div>
      <div class="playground-grid">
        <!-- LEFT: INPUT -->
        <article class="card">
          <h2>1. Input narrative</h2>
          <small>
            Write a short story (1 to 3 paragraphs). Names can be anonymised. The goal is to reveal
            control structure, not to judge the case.
          </small>

          <div>
            <div class="field-label">Context</div>
            <select id="contextSelect" class="select">
              <option value="generic">Not specified / generic</option>
              <option value="intimate" selected>Intimate / domestic</option>
              <option value="work">Workplace / management</option>
              <option value="institutional">Institutional / administrative</option>
              <option value="online">Online / digital</option>
            </select>
          </div>

          <div>
            <div class="field-label">Narrative (free text)</div>
            <textarea
              id="narrativeInput"
              class="textarea"
              placeholder="Describe what happened, in your own words. Who did what, when, where, and how did it affect you or others?"
            ></textarea>
            <div class="field-tip">
              Tip: include at least one concrete action, one time marker, and every threat, justification
              or constraint you remember.
            </div>
          </div>

          <div class="button-row">
            <button class="btn btn-primary" id="analyzeButton">Analyse the story</button>
            <button class="btn btn-secondary" id="resetButton">Reset</button>
            <button class="btn btn-ghost-local" id="loadExampleButton">Load an example</button>
          </div>
        </article>

        <!-- RIGHT: OVERLAY PANEL -->
        <article class="card">
          <h2>2. Psycho-forensic overlay</h2>
          <small>
            The demo reads the text and highlights structural control patterns using a conservative,
            rule-based model. Scores are <strong>approximate</strong> and only indicate converging
            signals within this story.
          </small>

          <!-- Scores -->
          <div class="score-grid">
            <div class="score-box">
              <div class="score-label">Coercion score (approx.)</div>
              <div class="score-value">
                <span id="coercionScoreValue">0</span><span>/ 100</span>
              </div>
              <div class="score-note" id="coercionScoreNote">
                No clear structural coercive pattern yet. Add concrete actions, constraints or threats if they exist.
              </div>
            </div>
            <div class="score-box">
              <div class="score-label">Immediate risk (narrative)</div>
              <div class="score-value">
                <span id="riskScoreValue">0</span><span>/ 100</span>
              </div>
              <div class="score-note score-note--risk" id="riskScoreNote">
                No explicit threat or physical risk appears in the text.
              </div>
            </div>
          </div>

          <!-- Mechanisms detected -->
          <div class="mechanisms" id="mechanismsSummary">
            <strong>Mechanisms detected:</strong> none so far. Run an analysis to see patterns.
          </div>

          <!-- Matrix -->
          <div class="subsection-title">Coercive control matrix</div>
          <table class="matrix-table" aria-describedby="mechanismsSummary">
            <thead>
              <tr>
                <th style="text-align:left;">Control axis</th>
                <th style="text-align:right;">Demo level</th>
              </tr>
            </thead>
            <tbody id="matrixBody">
              <tr>
                <td class="matrix-axis">Isolation / confinement</td>
                <td style="text-align:right;">
                  <span class="matrix-level-pill matrix-level-pill--none">None so far</span>
                </td>
              </tr>
              <tr>
                <td class="matrix-axis">Surveillance &amp; suspicion</td>
                <td style="text-align:right;">
                  <span class="matrix-level-pill matrix-level-pill--none">None so far</span>
                </td>
              </tr>
              <tr>
                <td class="matrix-axis">Control of communications</td>
                <td style="text-align:right;">
                  <span class="matrix-level-pill matrix-level-pill--none">None so far</span>
                </td>
              </tr>
              <tr>
                <td class="matrix-axis">Threats &amp; sanctions</td>
                <td style="text-align:right;">
                  <span class="matrix-level-pill matrix-level-pill--none">None so far</span>
                </td>
              </tr>
              <tr>
                <td class="matrix-axis">Economic / resource control</td>
                <td style="text-align:right;">
                  <span class="matrix-level-pill matrix-level-pill--none">None so far</span>
                </td>
              </tr>
              <tr>
                <td class="matrix-axis">Normalisation &amp; mental pressure</td>
                <td style="text-align:right;">
                  <span class="matrix-level-pill matrix-level-pill--none">None so far</span>
                </td>
              </tr>
            </tbody>
          </table>

          <!-- Signals -->
          <div class="subsection-title">Signals to monitor</div>
          <ul class="signals-list" id="signalsList">
            <li>No weak axis detected yet. Signals will appear here once a story is analysed.</li>
          </ul>

          <!-- Phenotype -->
          <div class="subsection-title">Narrative profile (phenotype)</div>
          <p class="phenotype-text" id="phenotypeText">
            Once analysed, this field summarises the overall narrative profile (phenotype): how the different
            control axes combine in this story (isolated incident, emerging pattern, or dense coercive environment).
          </p>

          <!-- Story with highlights -->
          <div class="subsection-title">Story with sensitive passages highlighted</div>
          <div class="story-box" id="highlightedStory">
            The analysed story will appear here with sensitive passages highlighted once you run the demo.
          </div>

          <p class="demo-disclaimer">
            <strong>This heuristic logic is intentionally conservative and demonstrative.</strong>
            It simply makes possible control patterns visible from the provided text. It does not
            replace legal, clinical or protective assessment.
          </p>
        </article>
      </div>

      <!-- Real case band -->
      <div class="band-real-case">
        <p>
          Facing a real case or a complex file? This page shows a <em>demonstration decoder</em>.
          In the scientific / CNRS pilot, the psycho-forensic layer is coupled with the full
          RPO standard, temporal graphs and a structured legal reading. If you want to test
          these modules on real-world cases, you can apply to the CNRS × TruthX pilot programme.
        </p>
        <a
          class="band-cta"
          href="https://www.truthx.co/truthx-pilote-form"
          target="_blank"
          rel="noopener noreferrer"
        >
          Apply for the CNRS pilot
        </a>
      </div>
    </div>
  </main>

  <!-- UNIVERSAL FOOTER -->
  <footer class="footer">
    <div class="footer-inner">
      <div class="footer-left">
        <div class="footer-title">OpenProof — RPO Specification v0.1</div>
        <div class="footer-text">
          © 2026 OpenProof Consortium. Research collaboration: CNRS – GREYC – Université de Caen Normandie.
          Specification editor: <strong>Gersende Ryard de Parcey</strong>.
        </div>
      </div>
      <div class="footer-right footer-links">
        <a href="https://www.openproof.net" target="_blank" rel="noopener noreferrer">Technical site</a>
        <span>•</span>
        <a href="https://www.truthx-openproof.org" target="_blank" rel="noopener noreferrer">Governance</a>
        <span>•</span>
        <a href="https://www.linkedin.com/in/gryard/" target="_blank" rel="noopener noreferrer">Contact</a>
      </div>
    </div>
  </footer>

  <!-- SCRIPT: HEURISTIC ANALYSER (unchanged) -->
  <script>
    (function () {
      const narrativeInput = document.getElementById("narrativeInput");
      const contextSelect = document.getElementById("contextSelect");
      const analyzeButton = document.getElementById("analyzeButton");
      const resetButton = document.getElementById("resetButton");
      const loadExampleButton = document.getElementById("loadExampleButton");

      const coercionScoreValue = document.getElementById("coercionScoreValue");
      const coercionScoreNote = document.getElementById("coercionScoreNote");
      const riskScoreValue = document.getElementById("riskScoreValue");
      const riskScoreNote = document.getElementById("riskScoreNote");
      const mechanismsSummary = document.getElementById("mechanismsSummary");
      const matrixBody = document.getElementById("matrixBody");
      const signalsList = document.getElementById("signalsList");
      const phenotypeText = document.getElementById("phenotypeText");
      const highlightedStory = document.getElementById("highlightedStory");

      const AXES = [
        {
          id: "isolation",
          label: "Isolation / confinement",
          cues: [
            "locked me in",
            "locked her in",
            "locked him in",
            "locked me inside",
            "locked the door",
            "kept me in",
            "would not let me leave",
            "took my keys",
            "took her keys",
            "took his keys",
            "could not leave",
            "confined",
            "prevented me from leaving"
          ]
        },
        {
          id: "surveillance",
          label: "Surveillance & suspicion",
          cues: [
            "checked my phone",
            "checked her phone",
            "checked his phone",
            "checking my phone",
            "went through my messages",
            "accusing me of hiding",
            "accused me of hiding",
            "who are you texting",
            "who was calling",
            "spied on",
            "installed a tracker",
            "followed me",
            "monitoring my",
            "constantly asking where I was"
          ]
        },
        {
          id: "communications",
          label: "Control of communications",
          cues: [
            "took my phone",
            "took her phone",
            "took his phone",
            "no one needed to hear from me",
            "no one needed to hear from her",
            "no one needed to hear from him",
            "stopped me from calling",
            "not allowed to call",
            "not allowed to talk to",
            "forbade me to talk",
            "blocked me from",
            "cut me off from",
            "deleted my contacts"
          ]
        },
        {
          id: "threats",
          label: "Threats & sanctions",
          cues: [
            "threatened to",
            "threatened me",
            "or else",
            "otherwise he would",
            "otherwise she would",
            "he said he would stop paying the rent",
            "she said she would stop paying the rent",
            "would hit me",
            "would hurt me",
            "screamed that he would",
            "screamed that she would",
            "said I would regret",
            "yelled that I would regret"
          ]
        },
        {
          id: "economic",
          label: "Economic / resource control",
          cues: [
            "full access to my bank",
            "access to my bank account",
            "all my bank notifications",
            "take the car keys",
            "took the car keys",
            "took my car",
            "stopped paying",
            "cut the money",
            "took my money",
            "controlled all the money"
          ]
        },
        {
          id: "normalisation",
          label: "Normalisation & mental pressure",
          cues: [
            "said I was overreacting",
            "said that I was overreacting",
            "said I was crazy",
            "said she was crazy",
            "said he was crazy",
            "normal for couples",
            "normal for parents",
            "everyone does that",
            "that is how relationships work",
            "you are too sensitive",
            "you are imagining things"
          ]
        }
      ];

      const RISK_CUES = [
        "threatened",
        "hit me",
        "hurt me",
        "kill",
        "kill myself",
        "kill himself",
        "kill herself",
        "suicide",
        "locked me in",
        "could not leave",
        "took the car keys",
        "stopped paying the rent",
        "no one needed to hear from me tonight"
      ];

      function normalise(text) {
        return text.toLowerCase();
      }

      function countCues(text, cues) {
        const norm = normalise(text);
        let count = 0;
        cues.forEach(c => {
          if (!c) return;
          const pattern = c.toLowerCase();
          if (pattern && norm.includes(pattern)) {
            count++;
          }
        });
        return count;
      }

      function classifyLevel(count) {
        if (count >= 2) return { label: `Strong, ${count} cues`, type: "strong" };
        if (count === 1) return { label: "Present, 1 cue", type: "present" };
        return { label: "None so far", type: "none" };
      }

      function analyseNarrative() {
        const text = narrativeInput.value.trim();
        if (!text) {
          alert("Please paste or write a short narrative first.");
          return;
        }

        const axisResults = AXES.map(axis => {
          const count = countCues(text, axis.cues);
          return { axis, count, level: classifyLevel(count) };
        });

        const totalCues = axisResults.reduce((sum, r) => sum + r.count, 0);
        const strongAxes = axisResults.filter(r => r.level.type === "strong");
        const presentAxes = axisResults.filter(r => r.level.type === "present");

        let coercionScore = Math.min(100, strongAxes.length * 25 + presentAxes.length * 10);
        if (coercionScore === 0 && totalCues > 0) coercionScore = 15;

        const riskCount = countCues(text, RISK_CUES);
        let riskScore = 0;
        if (riskCount >= 3) riskScore = 100;
        else if (riskCount === 2) riskScore = 70;
        else if (riskCount === 1) riskScore = 40;

        coercionScoreValue.textContent = coercionScore.toString();
        riskScoreValue.textContent = riskScore.toString();

        if (coercionScore === 0) {
          coercionScoreNote.textContent =
            "No clear structural coercive pattern yet. It may describe conflict or tension, or the narrative may still be too fragmentary.";
        } else if (coercionScore < 45) {
          coercionScoreNote.textContent =
            "Some control cues appear in the story. The pattern is weak but may need monitoring over time.";
        } else if (coercionScore < 80) {
          coercionScoreNote.textContent =
            "Several control axes co-exist. This pattern suggests a possible coercive environment.";
        } else {
          coercionScoreNote.textContent =
            "Multiple strong axes converge. The story reads like a dense coercive structure.";
        }

        if (riskScore === 0) {
          riskScoreNote.textContent =
            "No explicit threat or physical risk appears in the text.";
        } else if (riskScore < 60) {
          riskScoreNote.textContent =
            "Signals of possible risk (threats, confinement, sanctions) appear in the story. They deserve attention.";
        } else {
          riskScoreNote.textContent =
            "High-intensity risk signals (threats, confinement, sanctions). This calls for immediate vigilance.";
        }

        const activeAxes = axisResults.filter(r => r.count > 0);
        if (activeAxes.length === 0) {
          mechanismsSummary.innerHTML =
            "<strong>Mechanisms detected:</strong> none so far. The text may describe tension without clear control schemes.";
        } else {
          const labels = activeAxes
            .map(r => `${r.axis.label.toLowerCase()}`)
            .join(", ");
          mechanismsSummary.innerHTML =
            `<strong>Mechanisms detected:</strong> ${labels}.`;
        }

        matrixBody.innerHTML = "";
        axisResults.forEach(r => {
          const tr = document.createElement("tr");
          const tdAxis = document.createElement("td");
          tdAxis.className = "matrix-axis";
          tdAxis.textContent = r.axis.label;

          const tdLevel = document.createElement("td");
          tdLevel.style.textAlign = "right";

          const span = document.createElement("span");
          span.classList.add("matrix-level-pill");
          if (r.level.type === "present") span.classList.add("matrix-level-pill--present");
          else if (r.level.type === "none") span.classList.add("matrix-level-pill--none");

          span.textContent = r.level.label;
          tdLevel.appendChild(span);

          tr.appendChild(tdAxis);
          tr.appendChild(tdLevel);
          matrixBody.appendChild(tr);
        });

        const weakAxes = axisResults.filter(r => r.count === 1);
        signalsList.innerHTML = "";
        if (weakAxes.length === 0) {
          const li = document.createElement("li");
          li.textContent = "No single, isolated axis detected. Signals will appear here when weak patterns emerge.";
          signalsList.appendChild(li);
        } else {
          weakAxes.forEach(r => {
            const li = document.createElement("li");
            li.textContent = r.axis.label;
            signalsList.appendChild(li);
          });
        }

        if (totalCues === 0) {
          phenotypeText.textContent =
            "The narrative profile does not yet show a structured pattern of control. It may describe conflict or tension without systemic coercion, or the story may simply be too fragmentary.";
        } else if (strongAxes.length === 0 && presentAxes.length === 1) {
          phenotypeText.textContent =
            "The narrative profile shows isolated control behaviour on a single axis. It looks more like an early warning signal that should be monitored over time and cross-checked with other sources.";
        } else if (strongAxes.length <= 2) {
          phenotypeText.textContent =
            "The narrative profile points to a developing coercive control pattern: several axes start to interact, with episodes of pressure, surveillance or sanctions that may escalate if repeated.";
        } else {
          phenotypeText.textContent =
            "The narrative profile corresponds to a dense coercive control scheme: several axes interact (isolation, communications, sanctions, economic and mental pressure). In a full evaluation, this kind of phenotype would justify priority attention, safety planning and cross-checking with independent proof.";
        }

        highlightedStory.innerHTML = buildHighlightedStory(text);
      }

      function buildHighlightedStory(text) {
        let html = text;
        const allCues = Array.from(
          new Set(
            AXES.reduce((acc, axis) => acc.concat(axis.cues), []).filter(Boolean)
          )
        ).sort((a, b) => b.length - a.length);

        allCues.forEach(cue => {
          const pattern = cue.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
          const regex = new RegExp(pattern, "gi");
          html = html.replace(regex, match => `<span class="highlight">${match}</span>`);
        });

        return html;
      }

      function resetAll() {
        narrativeInput.value = "";
        coercionScoreValue.textContent = "0";
        riskScoreValue.textContent = "0";
        coercionScoreNote.textContent =
          "No clear structural coercive pattern yet. Add concrete actions, constraints or threats if they exist.";
        riskScoreNote.textContent =
          "No explicit threat or physical risk appears in the text.";
        mechanismsSummary.innerHTML =
          "<strong>Mechanisms detected:</strong> none so far. Run an analysis to see patterns.";
        matrixBody.innerHTML = "";
        AXES.forEach(axis => {
          const tr = document.createElement("tr");
          const tdAxis = document.createElement("td");
          tdAxis.className = "matrix-axis";
          tdAxis.textContent = axis.label;
          const tdLevel = document.createElement("td");
          tdLevel.style.textAlign = "right";
          const span = document.createElement("span");
          span.className = "matrix-level-pill matrix-level-pill--none";
          span.textContent = "None so far";
          tdLevel.appendChild(span);
          tr.appendChild(tdAxis);
          tr.appendChild(tdLevel);
          matrixBody.appendChild(tr);
        });
        signalsList.innerHTML = "";
        const li = document.createElement("li");
        li.textContent = "No weak axis detected yet. Signals will appear here once a story is analysed.";
        signalsList.appendChild(li);
        phenotypeText.textContent =
          "Once analysed, this field will describe the narrative profile (phenotype): the global shape of the story in terms of control patterns (isolated incident, emerging pattern, or dense coercive environment).";
        highlightedStory.textContent =
          "The analysed story will appear here with sensitive passages highlighted once you run the demo.";
      }

      function loadExample() {
        const exampleText =
          "On Saturday 12 February, around 9 pm, he locked me in the living room for almost two hours after I refused to cancel a dinner with my sister. " +
          "He stood in front of the door, took my phone and said that \"no one needed to hear from me tonight\". " +
          "Two days later, on Monday, he woke me up at 5:30 am accusing me of hiding conversations from him because I didn't leave my phone charging in the kitchen as he demanded. " +
          "Last week, he also threatened to take the car keys if I didn't give him all my bank notifications, saying it was \"normal for couples to share everything\" and that I was overreacting.";
        contextSelect.value = "intimate";
        narrativeInput.value = exampleText;
        analyseNarrative();
      }

      analyzeButton.addEventListener("click", analyseNarrative);
      resetButton.addEventListener("click", resetAll);
      loadExampleButton.addEventListener("click", loadExample);

      resetAll();
    })();
  </script>
</body>
</html>
